<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>咖啡会 - 最佳会面咖啡馆推荐</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@2.0.9/css/boxicons.min.css">
    <style>
        :root {
            --primary: #9c6644;
            --primary-light: #c68b59;
            --primary-dark: #7f5539;
            --secondary: #c9ada7;
            --light: #f2e9e4;
            --dark: #22223b;
            --success: #4a934a;
            --border-radius: 12px;
            --box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            background-color: var(--light);
            color: var(--dark);
            padding-bottom: 50px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background-color: var(--primary);
            color: white;
            padding: 60px 0 100px;
            text-align: center;
            position: relative;
            margin-bottom: 80px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 60"><path fill="%23f2e9e4" fill-opacity="1" d="M0,32L80,42.7C160,53,320,75,480,64C640,53,800,11,960,5.3C1120,0,1280,32,1360,48L1440,64L1440,100L1360,100C1280,100,1120,100,960,100C800,100,640,100,480,100C320,100,160,100,80,100L0,100Z"></path></svg>');
            background-size: cover;
            background-position: center;
        }

        .header-logo {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: -1px;
        }

        .coffee-icon {
            font-size: 3rem;
            vertical-align: middle;
            margin-right: 10px;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-content {
            margin-top: -60px;
        }

        .card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.8rem;
            color: var(--primary-dark);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--secondary);
            display: flex;
            align-items: center;
        }

        .section-title i {
            margin-right: 12px;
            font-size: 1.6rem;
            color: var(--primary);
        }

        .summary-card {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 15px;
        }

        .summary-item {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            background-color: rgba(156, 102, 68, 0.05);
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }

        .summary-label {
            font-size: 0.9rem;
            color: var(--primary-dark);
            margin-bottom: 5px;
        }

        .summary-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark);
        }

        .map-container {
            height: 500px;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            margin-bottom: 30px;
        }

        #map {
            height: 100%;
            width: 100%;
        }

        .map-legend {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: white;
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            z-index: 100;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border-radius: 50%;
        }

        .legend-center {
            background-color: #2ecc71;
        }

        .legend-location {
            background-color: #3498db;
        }

        .legend-cafe {
            background-color: #e74c3c;
        }

        .location-table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
        }

        .location-table th, .location-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .location-table th {
            background-color: var(--primary-light);
            color: white;
            font-weight: 600;
        }

        .location-table tr:last-child td {
            border-bottom: none;
        }

        .location-table tr:nth-child(even) {
            background-color: rgba(201, 173, 167, 0.1);
        }

        .cafe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .cafe-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }

        .cafe-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .cafe-img {
            height: 180px;
            background-color: var(--primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .cafe-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .cafe-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .cafe-name {
            font-size: 1.3rem;
            margin: 0 0 5px 0;
            color: var(--primary-dark);
        }

        .cafe-rating {
            display: inline-block;
            background-color: var(--primary);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .cafe-details {
            flex: 1;
        }

        .cafe-info {
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
        }

        .cafe-info i {
            color: var(--primary);
            margin-right: 8px;
            font-size: 1.1rem;
            min-width: 20px;
            margin-top: 3px;
        }

        .cafe-info-text {
            flex: 1;
        }

        .cafe-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 15px;
        }

        .cafe-tag {
            background-color: rgba(156, 102, 68, 0.1);
            color: var(--primary-dark);
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .cafe-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .cafe-distance {
            display: flex;
            align-items: center;
            color: var(--primary-dark);
            font-weight: 600;
        }

        .cafe-distance i {
            margin-right: 5px;
        }

        .cafe-actions a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: var(--primary);
            color: white;
            padding: 8px 15px;
            border-radius: 6px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .cafe-actions a:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .cafe-actions i {
            margin-right: 5px;
        }

        .transportation-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .transport-card {
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-top: 5px solid var(--primary);
        }

        .transport-title {
            font-size: 1.3rem;
            color: var(--primary-dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .transport-title i {
            margin-right: 10px;
            font-size: 1.4rem;
            color: var(--primary);
        }

        .transport-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .transport-list li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }

        .transport-list li:last-child {
            border-bottom: none;
        }

        .transport-list i {
            color: var(--primary);
            margin-right: 10px;
        }

        .center-coords {
            display: inline-block;
            background-color: rgba(156, 102, 68, 0.1);
            border-radius: 6px;
            padding: 3px 8px;
            margin: 0 5px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .footer {
            text-align: center;
            background-color: var(--primary-dark);
            color: white;
            padding: 20px 0;
            margin-top: 50px;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: var(--transition);
            margin-top: 30px;
        }

        .back-button:hover {
            background-color: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .back-button i {
            margin-right: 8px;
        }

        /* 搜索过程的样式 */
        .search-process-card {
            position: relative;
            overflow: hidden;
            background-color: #fafafa;
            border-left: 5px solid #2c3e50;
        }

        .search-process {
            position: relative;
            padding: 20px 0;
        }

        .process-step {
            display: flex;
            margin-bottom: 30px;
            opacity: 0.5;
            transform: translateX(-20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .process-step.active {
            opacity: 1;
            transform: translateX(0);
        }

        .step-icon {
            flex: 0 0 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-right: 20px;
            position: relative;
        }

        .step-number {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background-color: var(--primary-dark);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-size: 1.3rem;
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        .step-details {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        .code-block {
            background-color: #2c3e50;
            color: #e6e6e6;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9rem;
            margin: 15px 0;
            white-space: pre;
            overflow-x: auto;
        }

        .highlight-text {
            background-color: rgba(46, 204, 113, 0.2);
            color: #2c3e50;
            padding: 3px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .search-animation {
            height: 200px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        .radar-circle {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(52, 152, 219, 0.1);
            animation: radar 3s infinite;
        }

        .radar-circle:nth-child(1) {
            animation-delay: 0s;
        }

        .radar-circle:nth-child(2) {
            animation-delay: 1s;
        }

        .radar-circle:nth-child(3) {
            animation-delay: 2s;
        }

        .center-point {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #e74c3c;
            z-index: 2;
            box-shadow: 0 0 0 5px rgba(231, 76, 60, 0.3);
        }

        /* 高德地图操作动画 */
        .map-operation-animation {
            height: 200px;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            background-color: #f5f5f5;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .map-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23f0f0f0"/><path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="%23ccc" stroke-width="0.5"/><path d="M50,0 L50,100 M0,50 L100,50" stroke="%23ccc" stroke-width="0.5"/></svg>');
            background-size: 50px 50px;
            opacity: 0.7;
        }

        .map-cursor {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: rgba(231, 76, 60, 0.7);
            border-radius: 50%;
            top: 50%;
            left: 30%;
            transform: translate(-50%, -50%);
            animation: mapCursor 4s infinite ease-in-out;
            z-index: 2;
        }

        .map-search-indicator {
            position: absolute;
            width: 80px;
            height: 80px;
            border: 2px dashed rgba(52, 152, 219, 0.6);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: mapSearch 3s infinite ease-in-out;
            z-index: 1;
        }

        @keyframes mapCursor {
            0% { left: 30%; top: 30%; }
            30% { left: 60%; top: 40%; }
            60% { left: 40%; top: 70%; }
            100% { left: 30%; top: 30%; }
        }

        @keyframes mapSearch {
            0% { width: 30px; height: 30px; opacity: 1; }
            100% { width: 150px; height: 150px; opacity: 0; }
        }

        @keyframes radar {
            0% {
                width: 40px;
                height: 40px;
                opacity: 1;
            }
            100% {
                width: 300px;
                height: 300px;
                opacity: 0;
            }
        }

        .ranking-result {
            margin-top: 15px;
        }

        .result-bar {
            height: 30px;
            background-color: var(--primary);
            color: white;
            margin-bottom: 8px;
            border-radius: 15px;
            padding: 0 15px;
            display: flex;
            align-items: center;
            font-weight: 600;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            animation: growBar 2s ease;
            transform-origin: left;
        }

        @keyframes growBar {
            0% { width: 0; }
            100% { width: 100%; }
        }

        .mt-4 {
            margin-top: 1rem;
        }

        /* 添加响应式设计 */
        @media (max-width: 768px) {
            .cafe-grid {
                grid-template-columns: 1fr;
            }

            .transportation-info {
                grid-template-columns: 1fr;
            }

            header {
                padding: 40px 0 80px;
            }

            .header-logo {
                font-size: 2.2rem;
            }

            .process-step {
                flex-direction: column;
            }

            .step-icon {
                margin-bottom: 15px;
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-logo">
                <i class='bx bxs-coffee-togo coffee-icon'></i>咖啡会
            </div>
            <div class="header-subtitle">为您找到的最佳会面咖啡馆</div>
        </div>
    </header>

    <div class="container main-content">
        <div class="card">
            <h2 class="section-title"><i class='bx bx-info-circle'></i>推荐摘要</h2>
            <div class="summary-card">
                <div class="summary-item">
                    <div class="summary-label">参与地点数</div>
                    <div class="summary-value">2 个地点</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">推荐咖啡馆数</div>
                    <div class="summary-value">5 家咖啡馆</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">特殊需求</div>
                    <div class="summary-value">适合会面</div>
                </div>
            </div>
        </div>

        <!-- 在此处添加搜索过程 -->
        
        <div class="card search-process-card">
            <h2 class="section-title"><i class='bx bx-bot'></i>AI 搜索过程</h2>
            <div class="search-process">
                
            <div class="process-step" data-step="1">
                <div class="step-icon">
                    <i class='bx bx-map-pin'></i>
                    <div class="step-number">1</div>
                </div>
                <div class="step-content">
                    <h3 class="step-title">分析用户位置信息</h3>
                    <div class="step-details">
                        <p>我检测到2个不同的位置。正在分析它们的地理分布...</p><ul><li>分析位置 1: <strong>香港中文大学深圳校区</strong></li><li>分析位置 2: <strong>大运中心</strong></li></ul>
                    </div>
                </div>
            </div>
            
            <div class="process-step" data-step="2">
                <div class="step-icon">
                    <i class='bx bx-map'></i>
                    <div class="step-number">2</div>
                </div>
                <div class="step-content">
                    <h3 class="step-title">正在操作高德地图</h3>
                    <div class="step-details">
                        
            <p>正在操作高德地图寻找最佳咖啡馆的位置...</p>
            <div class="map-operation-animation">
                <div class="map-bg"></div>
                <div class="map-cursor"></div>
                <div class="map-search-indicator"></div>
            </div>
            
                    </div>
                </div>
            </div>
            
            <div class="process-step" data-step="3">
                <div class="step-icon">
                    <i class='bx bx-list-check'></i>
                    <div class="step-number">3</div>
                </div>
                <div class="step-content">
                    <h3 class="step-title">分析用户特殊需求</h3>
                    <div class="step-details">
                        <p>您没有提供特定的需求偏好，将基于综合评分和距离推荐最佳咖啡馆。</p>
                    </div>
                </div>
            </div>
            
            <div class="process-step" data-step="4">
                <div class="step-icon">
                    <i class='bx bx-search-alt'></i>
                    <div class="step-number">4</div>
                </div>
                <div class="step-content">
                    <h3 class="step-title">搜索周边咖啡馆</h3>
                    <div class="step-details">
                        
        <p>我正在以最佳会面点为中心，搜索周边2公里范围内的咖啡馆...</p>
        <div class="search-animation">
            <div class="radar-circle"></div>
            <div class="radar-circle"></div>
            <div class="radar-circle"></div>
            <div class="center-point"></div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="process-step" data-step="5">
                <div class="step-icon">
                    <i class='bx bx-sort'></i>
                    <div class="step-number">5</div>
                </div>
                <div class="step-content">
                    <h3 class="step-title">对咖啡馆进行排名</h3>
                    <div class="step-details">
                        
        <p>我已找到多家咖啡馆，正在根据综合评分对它们进行排名...</p>
        <div class="ranking-result">
            <div class="result-bar" style="width: 95%;">咖啡评分</div>
            <div class="result-bar" style="width: 85%;">距离便利性</div>
            <div class="result-bar" style="width: 75%;">环境舒适度</div>
            <div class="result-bar" style="width: 65%;">交通便利性</div>
        </div>
        
                    </div>
                </div>
            </div>
            
            </div>
            
        <script>
        // 在页面加载完成后，自动按顺序展示搜索步骤
        document.addEventListener('DOMContentLoaded', function() {
            const steps = document.querySelectorAll('.process-step');
            let currentStep = 0;

            function showNextStep() {
                if (currentStep < steps.length) {
                    steps[currentStep].classList.add('active');
                    currentStep++;
                    setTimeout(showNextStep, 1500);
                }
            }

            setTimeout(showNextStep, 500);
        });
        </script>
        
        </div>
        

        <div class="card">
            <h2 class="section-title"><i class='bx bx-map-pin'></i>地点信息</h2>
            <table class="location-table">
                <thead>
                    <tr>
                        <th>序号</th>
                        <th>地点名称</th>
                        <th>详细地址</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>香港中文大学深圳校区</td><td>广东省深圳市龙岗区香港中文大学深圳(西门)</td></tr><tr><td>2</td><td>大运中心</td><td>广东省深圳市龙岗区大运中心(公交站)</td></tr>
                </tbody>
            </table>
        </div>

        <div class="card">
            <h2 class="section-title"><i class='bx bx-map-alt'></i>地图展示</h2>
            <div class="map-container">
                <div id="map"></div>
                <div class="map-legend">
                    <div class="legend-item">
                        <div class="legend-color legend-center"></div>
                        <span>最佳会面点</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-location"></div>
                        <span>所在地点</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-cafe"></div>
                        <span>咖啡馆</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="section-title"><i class='bx bx-coffee'></i>推荐咖啡馆</h2>
            <div class="cafe-grid">
                
            <div class="cafe-card">
                <div class="cafe-img">
                    <i class='bx bxs-coffee-alt'></i>
                </div>
                <div class="cafe-content">
                    <div class="cafe-header">
                        <div>
                            <h3 class="cafe-name">星巴克(深圳香港中文大学店)</h3>
                        </div>
                        <span class="cafe-rating">评分: 4.1</span>
                    </div>
                    <div class="cafe-details">
                        <div class="cafe-info">
                            <i class='bx bx-map'></i>
                            <div class="cafe-info-text">龙翔大道2001号香港中文大学(深圳)实验楼首层</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-time'></i>
                            <div class="cafe-info-text">周一至周五 07:00-21:30；周六至周日 07:30-21:30</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-phone'></i>
                            <div class="cafe-info-text">0755-84820743</div>
                        </div>
                        <div class="cafe-tags">
                            <span class='cafe-tag'>美式咖啡</span><span class='cafe-tag'>星冰乐</span><span class='cafe-tag'>蛋堡</span><span class='cafe-tag'>早午餐</span>
                        </div>
                    </div>
                    <div class="cafe-footer">
                        <div class="cafe-distance">
                            <i class='bx bx-walk'></i> 0.1 公里
                        </div>
                        <div class="cafe-actions">
                            <a href="https://uri.amap.com/marker?position=114.213527,22.687805&name=星巴克(深圳香港中文大学店)" target="_blank">
                                <i class='bx bx-navigation'></i>导航
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cafe-card">
                <div class="cafe-img">
                    <i class='bx bxs-coffee-alt'></i>
                </div>
                <div class="cafe-content">
                    <div class="cafe-header">
                        <div>
                            <h3 class="cafe-name">会饮咖啡</h3>
                        </div>
                        <span class="cafe-rating">评分: 4.3</span>
                    </div>
                    <div class="cafe-details">
                        <div class="cafe-info">
                            <i class='bx bx-map'></i>
                            <div class="cafe-info-text">龙城街道龙翔大道2001号香港中文大學校园内</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-time'></i>
                            <div class="cafe-info-text">周一至周日 08:00-20:00</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-phone'></i>
                            <div class="cafe-info-text">13509629522</div>
                        </div>
                        <div class="cafe-tags">
                            <span class='cafe-tag'>咖啡馆</span>
                        </div>
                    </div>
                    <div class="cafe-footer">
                        <div class="cafe-distance">
                            <i class='bx bx-walk'></i> 0.3 公里
                        </div>
                        <div class="cafe-actions">
                            <a href="https://uri.amap.com/marker?position=114.210894,22.687017&name=会饮咖啡" target="_blank">
                                <i class='bx bx-navigation'></i>导航
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cafe-card">
                <div class="cafe-img">
                    <i class='bx bxs-coffee-alt'></i>
                </div>
                <div class="cafe-content">
                    <div class="cafe-header">
                        <div>
                            <h3 class="cafe-name">Arabica(深圳大运天地南区)</h3>
                        </div>
                        <span class="cafe-rating">评分: 4.2</span>
                    </div>
                    <div class="cafe-details">
                        <div class="cafe-info">
                            <i class='bx bx-map'></i>
                            <div class="cafe-info-text">龙翔大道3001号深圳大运中心深圳大运天地南区L1层</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-time'></i>
                            <div class="cafe-info-text">周一至周五 08:30-21:00；周六至周日 10:00-21:00</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-phone'></i>
                            <div class="cafe-info-text">15317203662</div>
                        </div>
                        <div class="cafe-tags">
                            <span class='cafe-tag'>咖啡馆</span>
                        </div>
                    </div>
                    <div class="cafe-footer">
                        <div class="cafe-distance">
                            <i class='bx bx-walk'></i> 0.8 公里
                        </div>
                        <div class="cafe-actions">
                            <a href="https://uri.amap.com/marker?position=114.219529,22.694687&name=Arabica(深圳大运天地南区)" target="_blank">
                                <i class='bx bx-navigation'></i>导航
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cafe-card">
                <div class="cafe-img">
                    <i class='bx bxs-coffee-alt'></i>
                </div>
                <div class="cafe-content">
                    <div class="cafe-header">
                        <div>
                            <h3 class="cafe-name">eueu.nest(深圳大运店)</h3>
                        </div>
                        <span class="cafe-rating">评分: 4.6</span>
                    </div>
                    <div class="cafe-details">
                        <div class="cafe-info">
                            <i class='bx bx-map'></i>
                            <div class="cafe-info-text">黄阁路200号(大运中心地铁站C口旁)</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-time'></i>
                            <div class="cafe-info-text">周一至周日 11:00-02:00</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-phone'></i>
                            <div class="cafe-info-text">电话未知</div>
                        </div>
                        <div class="cafe-tags">
                            <span class='cafe-tag'>咖啡馆</span>
                        </div>
                    </div>
                    <div class="cafe-footer">
                        <div class="cafe-distance">
                            <i class='bx bx-walk'></i> 0.9 公里
                        </div>
                        <div class="cafe-actions">
                            <a href="https://uri.amap.com/marker?position=114.218658,22.695791&name=eueu.nest(深圳大运店)" target="_blank">
                                <i class='bx bx-navigation'></i>导航
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cafe-card">
                <div class="cafe-img">
                    <i class='bx bxs-coffee-alt'></i>
                </div>
                <div class="cafe-content">
                    <div class="cafe-header">
                        <div>
                            <h3 class="cafe-name">Grid Coffee(深圳大运天地南区)</h3>
                        </div>
                        <span class="cafe-rating">评分: 4.6</span>
                    </div>
                    <div class="cafe-details">
                        <div class="cafe-info">
                            <i class='bx bx-map'></i>
                            <div class="cafe-info-text">龙翔大道3001号深圳大运中心深圳大运天地南区L1层</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-time'></i>
                            <div class="cafe-info-text">周一至周日 07:30-22:00</div>
                        </div>
                        <div class="cafe-info">
                            <i class='bx bx-phone'></i>
                            <div class="cafe-info-text">17813654731</div>
                        </div>
                        <div class="cafe-tags">
                            <span class='cafe-tag'>coffee</span>
                        </div>
                    </div>
                    <div class="cafe-footer">
                        <div class="cafe-distance">
                            <i class='bx bx-walk'></i> 0.9 公里
                        </div>
                        <div class="cafe-actions">
                            <a href="https://uri.amap.com/marker?position=114.219835,22.695387&name=Grid Coffee(深圳大运天地南区)" target="_blank">
                                <i class='bx bx-navigation'></i>导航
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>

        <div class="card">
            <h2 class="section-title"><i class='bx bx-car'></i>交通与停车建议</h2>
            <div class="transportation-info">
                <div class="transport-card">
                    <h3 class="transport-title"><i class='bx bx-trip'></i>前往方式</h3>
                    <p>最佳会面点位于<span class="center-coords">114.214311, 22.688543</span>附近</p>
                    <ul class="transport-list">
                        <li><i class='bx bx-map'></i><strong>香港中文大学深圳校区</strong>: 距离中心点约 <span class='distance'>0.7 公里</span></li><li><i class='bx bx-map'></i><strong>大运中心</strong>: 距离中心点约 <span class='distance'>0.7 公里</span></li>
                    </ul>
                </div>
                <div class="transport-card">
                    <h3 class="transport-title"><i class='bx bxs-car-garage'></i>停车建议</h3>
                    <ul class="transport-list">
                        <li><i class='bx bx-check'></i>大部分推荐的咖啡馆周边有停车场或提供停车服务</li>
                        <li><i class='bx bx-check'></i>建议使用高德地图或百度地图导航到目的地</li>
                        <li><i class='bx bx-check'></i>高峰时段建议提前30分钟出发，以便寻找停车位</li>
                        <li><i class='bx bx-check'></i>部分咖啡馆可能提供免费停车或停车优惠</li>
                    </ul>
                </div>
            </div>

            <a href="/workspace/cafe_finder.html" class="back-button">
                <i class='bx bx-left-arrow-alt'></i>返回首页
            </a>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>© 2025 咖啡会 - 智能咖啡馆推荐服务 | 数据来源：高德地图</p>
        </div>
    </footer>

    <script type="text/javascript">
        // 定义全局变量存储标记点数据
        var markersData = [{"name": "\u6700\u4f73\u4f1a\u9762\u70b9", "position": [114.21431100000001, 22.688543], "icon": "center"}, {"name": "\u5730\u70b91: \u9999\u6e2f\u4e2d\u6587\u5927\u5b66\u6df1\u5733\u6821\u533a", "position": [114.208552, 22.68398], "icon": "location"}, {"name": "\u5730\u70b92: \u5927\u8fd0\u4e2d\u5fc3", "position": [114.22007, 22.693106], "icon": "location"}, {"name": "\u661f\u5df4\u514b(\u6df1\u5733\u9999\u6e2f\u4e2d\u6587\u5927\u5b66\u5e97)", "position": [114.213527, 22.687805], "icon": "cafe"}, {"name": "\u4f1a\u996e\u5496\u5561", "position": [114.210894, 22.687017], "icon": "cafe"}, {"name": "Arabica(\u6df1\u5733\u5927\u8fd0\u5929\u5730\u5357\u533a)", "position": [114.219529, 22.694687], "icon": "cafe"}, {"name": "eueu.nest(\u6df1\u5733\u5927\u8fd0\u5e97)", "position": [114.218658, 22.695791], "icon": "cafe"}, {"name": "Grid Coffee(\u6df1\u5733\u5927\u8fd0\u5929\u5730\u5357\u533a)", "position": [114.219835, 22.695387], "icon": "cafe"}];

        // 配置高德地图安全密钥
        window._AMapSecurityConfig = {
            securityJsCode: "",
        };

        // 等待页面加载完成再加载地图
        window.onload = function() {
            // 动态加载高德地图API
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://webapi.amap.com/loader.js';
            script.onload = function() {
                AMapLoader.load({
                    key: "5cdbaed6e00545f6607d0f1263b67bd6", // 使用您提供的Key
                    version: "2.0",
                    plugins: ["AMap.Scale", "AMap.ToolBar"],
                    AMapUI: {
                        version: "1.1",
                        plugins: ["overlay/SimpleMarker"],
                    }
                })
                .then(function(AMap) {
                    initMap(AMap);
                })
                .catch(function(e) {
                    console.error('地图加载失败:', e);
                });
            };
            document.body.appendChild(script);

            // 添加咖啡馆卡片动画效果
            animateCafeCards();
        };

        // 初始化地图的回调函数
        function initMap(AMap) {
            // 创建地图实例
            var map = new AMap.Map('map', {
                zoom: 12,
                center: [114.21431100000001, 22.688543],
                resizeEnable: true,
                viewMode: '3D'
            });

            // 添加地图控件
            map.addControl(new AMap.ToolBar());
            map.addControl(new AMap.Scale());

            // 存储所有标记点
            var markers = [];

            // 为不同类型的标记创建不同的样式
            markersData.forEach(function(item) {
                var markerContent;
                var position = new AMap.LngLat(item.position[0], item.position[1]);

                if (item.icon === 'center') {
                    // 最佳会面点 - 绿色
                    markerContent = `
                        <div style="background-color: #2ecc71; width: 24px; height: 24px; border-radius: 12px;
                                    border: 2px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.3);">
                        </div>`;
                } else if (item.icon === 'location') {
                    // 用户地点 - 蓝色
                    markerContent = `
                        <div style="background-color: #3498db; width: 24px; height: 24px; border-radius: 12px;
                                    border: 2px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.3);">
                        </div>`;
                } else {
                    // 咖啡馆 - 红色
                    markerContent = `
                        <div style="background-color: #e74c3c; width: 24px; height: 24px; border-radius: 12px;
                                    border: 2px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.3);">
                        </div>`;
                }

                // 创建自定义标记
                var marker = new AMap.Marker({
                    position: position,
                    content: markerContent,
                    title: item.name,
                    anchor: 'center',
                    offset: new AMap.Pixel(0, 0)
                });

                // 创建信息窗体
                var infoWindow = new AMap.InfoWindow({
                    content: '<div style="padding:10px;font-size:14px;">' + item.name + '</div>',
                    offset: new AMap.Pixel(0, -12)
                });

                // 绑定点击事件
                marker.on('click', function() {
                    infoWindow.open(map, marker.getPosition());
                });

                markers.push(marker);
                marker.setMap(map);
            });

            // 添加路线规划功能
            if (markersData.length > 1) {
                var pathCoordinates = [];
                markersData.filter(item => item.icon !== 'cafe').forEach(function(item) {
                    pathCoordinates.push(new AMap.LngLat(item.position[0], item.position[1]));
                });

                // 绘制连接线
                var polyline = new AMap.Polyline({
                    path: pathCoordinates,
                    strokeColor: '#3498db',  // 线颜色
                    strokeWeight: 4,         // 线宽
                    strokeStyle: 'dashed',   // 线样式
                    strokeDasharray: [5, 5], // 虚线样式
                    lineJoin: 'round'        // 折线拐点连接处样式
                });

                polyline.setMap(map);
            }

            // 自动调整地图视野以包含所有标记
            map.setFitView(markers);
        }

        // 咖啡馆卡片动画
        function animateCafeCards() {
            const cards = document.querySelectorAll('.cafe-card');

            // 检查IntersectionObserver是否可用
            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.opacity = 1;
                            entry.target.style.transform = 'translateY(0)';
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });

                cards.forEach((card, index) => {
                    card.style.opacity = 0;
                    card.style.transform = 'translateY(30px)';
                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    card.style.transitionDelay = (index * 0.1) + 's';
                    observer.observe(card);
                });
            } else {
                // 回退方案 - 简单的延迟动画
                cards.forEach((card, index) => {
                    card.style.opacity = 0;
                    card.style.transform = 'translateY(30px)';
                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';

                    setTimeout(() => {
                        card.style.opacity = 1;
                        card.style.transform = 'translateY(0)';
                    }, 300 + (index * 100));
                });
            }
        }
    </script>
</body>
</html>